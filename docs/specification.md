# テニスコート予約管理アプリ 仕様書（v1.1）

---

## 1. 概要

本アプリは、複数人で行うテニスコートの「抽選・予約」情報を共有・管理するWebアプリです。
スマートフォンでの操作をメインに想定し、月単位のカレンダーで直感的に予約状況を確認可能です。

---

## 2. 目的

- 誰が・どこの施設を・いつ予約／抽選しているか全員が把握できる
- 抽選申し込み期間や確保状況を忘れずに管理
- スプレッドシートやLINEよりも見やすいUIで一元管理

---

## 3. 機能概要

| 項目         | 内容                                                                                             |
| ------------ | ------------------------------------------------------------------------------------------------ |
| 表示形式     | 月カレンダー表示（スマホ縦画面をメイン、PCも対応）                                               |
| 表示項目     | 施設名（直接入力）、時間帯（10分単位）、担当者（ニックネーム）、状態（確保・抽選中・中止・完了） |
| 状態別カラー | 確保＝🟩緑／抽選中＝🟨黄／中止＝⬜灰／完了＝⬜灰                                                 |
| 操作         | カレンダー上の日付タップで詳細モーダル表示 → 登録・編集・削除可能（削除時確認ダイアログ）       |
| フィルタ     | 施設名・担当者で絞り込み表示                                                                     |
| 時間指定     | 時間・分をプルダウンで選択（直接入力不可）                                                       |
| 参加表明     | 確保された予約に対して参加/不参加をニックネーム単位で入力可能（編集可能）                        |
| 参加人数表示 | カレンダー上に「参加人数／不参加人数」を表示                                                     |
| 抽選期間確認 | 別画面で抽選期間一覧を表示（複数の抽選内容に対応）                                               |
| 保存方法     | CSVファイル（将来的にGoogle Sheets連携も可能）                                                   |

---

## 4. データ構造（概要）

- **reservations**: 予約イベントの基本情報
- **confirmed_reservations**: 確保済み予約（1:Nで参加者情報と紐づく）
- **participation_status**: 参加者ごとの参加/不参加情報
- **lottery_periods**: 抽選応募可能期間、抽選結果と紐づく

---

## 5. UIデザイン方針

| 要素           | 内容                                   |
| -------------- | -------------------------------------- |
| カラーイメージ | ミント × オレンジ × 白               |
| タイトル       | 「テニスコート予約管理」               |
| フォント       | 柔らかく読みやすい丸ゴシック系         |
| 雰囲気         | 明るく・楽しく・ポップな印象           |
| レイアウト     | カード風・カレンダー中心・アイコン多用 |

---

## 6. 今後の拡張（プロダクトバックログ）

| 優先度 | 機能名                       | 概要                             | 想定タイミング |
| :----: | ---------------------------- | -------------------------------- | -------------- |
| ★★★ | 抽選申し込み期間リマインダー | 締切前に通知（メール or 画面上） | v2.0           |
| ★★☆ | 参加履歴管理                 | 参加表明の履歴保存、修正履歴確認 | v2.1           |
| ★☆☆ | CSV自動バックアップ          | 定期的にデータをバックアップ     | v2.3           |

---

## 7. 開発・運用環境

| 項目           | 内容                                 |
| -------------- | ------------------------------------ |
| 開発言語       | Python 3.x                           |
| フレームワーク | Streamlit                            |
| デプロイ環境   | Streamlit Cloud                      |
| バージョン管理 | GitHub（Public Repository）          |
| 主なライブラリ | pandas, streamlit-calendar, datetime |
| デバイス対応   | スマホ（縦画面メイン）、PC           |

---

## 8. 開発フロー（v1系）

1. 本仕様書を GitHub で更新
2. Streamlit アプリ (`tennis_app.py`) にカレンダー・予約機能実装
3. 参加表明画面・抽選期間確認画面を実装
4. スマホ・PCで動作確認
5. バグ・UI調整 → v1.1/v1.2 アップデート

---

## 🧭 第2章：画面設計

本アプリは、ユーザーがスマートフォン中心で直感的に操作できるよう、6つの主要画面で構成される。

| No | 画面名             | 主な役割                                                         |
| -- | ------------------ | ---------------------------------------------------------------- |
| 1  | トップ画面         | 「テニスコート予約管理」タイトル表示、予約カレンダーへの遷移     |
| 2  | 予約カレンダー画面 | 月カレンダー上で予約状況を表示。日付クリックで詳細モーダルを開く |
| 3  | 予約詳細モーダル   | 予約内容の確認・登録・編集・削除、参加者数の確認                 |
| 4  | 参加表明画面       | 各予約に対して参加／不参加を登録・修正できる                     |
| 5  | 抽選期間確認画面   | 抽選応募できる期間を確認（複数抽選あり）                         |
| 6  | 確認ダイアログ     | 登録・削除時の誤操作を防ぐための確認表示                         |

---

### 各画面 I/O 設計概要

| 画面               | 主な入出力                                         | 備考                                                     |
| ------------------ | -------------------------------------------------- | -------------------------------------------------------- |
| トップ画面         | 入：なし``出：メニュー表示（「予約を見る」ボタン） | 初期画面、装飾＋説明中心                                 |
| 予約カレンダー画面 | 入：施設名・担当者フィルタ、月切替                 | 出：日別ステータス（色分け）、日付クリック時モーダル表示 |
| 予約詳細モーダル   | 入：施設名、日付、時間帯、担当者、状態、参加状況   | 出：登録／編集／削除後の反映、完了ステータス自動更新     |
| 参加表明画面       | 入：ニックネーム、参加・不参加（◯／×）           | 出：参加人数、不参加人数の表示                           |
| 抽選期間確認画面   | 入：抽選種別の選択                                 | 出：期間表示（開始日〜終了日）および説明                 |
| 確認ダイアログ     | 入：操作種別（登録／削除）                         | 出：確認メッセージ表示、「はい／いいえ」応答処理         |

---

### 状態と表示ルール

| 状態   | 表示色 | 説明                     |
| ------ | ------ | ------------------------ |
| 確保   | 🟩 緑  | コート確保済み           |
| 抽選中 | 🟨 黄  | 抽選申し込み中           |
| 中止   | ⬜ 灰  | イベント中止             |
| 完了   | ⬜ 灰  | 日付経過後に自動的に更新 |

---

（最終更新日：2025年11月7日）sleepy
