# 🧭 DEVELOPMENT.md

**テニスコート予約管理アプリ — 開発手順書（v1.0）**

---

## ■ 開発環境構築手順

| 項目           | 内容                                |
| -------------- | ----------------------------------- |
| 言語           | Python 3.x                          |
| フレームワーク | Streamlit                           |
| 主ライブラリ   | pandas, datetime, uuid              |
| データ保存     | CSV（UTF-8, カンマ区切り）          |
| 実行方法       | `streamlit run src/tennis_app.py` |
| 開発環境       | GitHub + Streamlit Cloud            |

---

## ■ ディレクトリ構成（再掲）


project_root/

├─ docs/

│   ├─ SPECIFICATION.md

│   ├─ BACKLOG.md

│   ├─ DATA_SPEC.md

│   ├─ DEVELOPMENT.md

│   ├─ UI_FLOW.md

│   └─ DOCUMENTS.md

├─ src/

│   └─ tennis_app.py

├─ data/

│   └─ reservations.csv

├─ tests/

└─ README.md


## ■ アプリ構成概要

| モジュール           | 役割         | 主な関数・処理                     |
| -------------------- | ------------ | ---------------------------------- |
| `tennis_app.py`    | メインアプリ | 画面制御・状態管理・CSV入出力      |
| `reservations.csv` | データ保持   | アプリ起動時にロード／更新時に保存 |


## ■ データ処理フロー

| フェーズ          | 処理内容                               | 実装方法（想定）                                    |
| ----------------- | -------------------------------------- | --------------------------------------------------- |
| 1. 起動時         | `reservations.csv` 読み込み          | `pandas.read_csv()`                               |
| 2. カレンダー表示 | 日付別にデータを整形し表示             | groupby(date)                                       |
| 3. 登録・編集     | フォーム入力をDataFrameに追加／更新    | `df.append()` または `df.loc[]`                 |
| 4. 削除           | 対象ID行を削除                         | `df.drop()`                                       |
| 5. 自動完了化     | 今日の日付より前の予約を完了扱いに変更 | `if date < today: status = "完了"`                |
| 6. 保存           | DataFrameをCSVに書き戻し               | `df.to_csv("data/reservations.csv", index=False)` |

---

## ■ UIイベント設計（概要）

| イベント               | 動作                       | 備考             |
| ---------------------- | -------------------------- | ---------------- |
| カレンダー日付クリック | 該当日の詳細モーダルを開く | 新規／編集両対応 |
| 予約登録ボタン押下     | CSVへ追記・保存            | UUID発行         |
| 削除ボタン押下         | 確認ダイアログ表示後に削除 | 誤操作防止       |
| ステータス更新         | 日次チェックで自動実行     | 起動時にも反映   |
| 参加表明入力           | 該当予約に紐づけて人数更新 | 参加〇・不参加× |

---

## ■ 今後の拡張予定（次フェーズ対応）

| 優先度 | 機能                | 概要                                      |
| :----: | ------------------- | ----------------------------------------- |
| ★★★ | 抽選期間管理        | 別CSV（lottery_period.csv）による期間表示 |
| ★★☆ | バックアップ機能    | 定期的にCSVを自動保存                     |
| ★☆☆ | Google Calendar API | 外部連携機能（v3以降）                    |

---

## ■ 開発フロー（運用手順）

1. ブランチ作成（例：`feature/calendar-ui`）
2. 機能単位でコミット
3. 動作確認後、`main` にマージ
4. Streamlit Cloudでデプロイ確認
5. GitHubでドキュメント更新

---

（最終更新：2025年11月）
